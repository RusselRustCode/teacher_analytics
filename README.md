# teacher_analytics Summary:

1)Входная точка: Go-сервис (Core Service)
Когда при отправке POST /api/log, происходит следующее:
-Валидация: Go проверяет, что student_id и action_type на месте.
-Persistence (Хранение): Сервис записывает "сырой" лог в PostgreSQL.
-Событие (Event): Go не вызывает Python напрямую. Вместо этого он кидает сообщение в Kafka (топик student-logs).
-Инвалидация кэша: Go удаляет старую аналитику этого студента из Redis, так как данные обновились и старый отчет больше не актуален.


2)Транспортный слой: Apache Kafka


3)Python-сервис (Analytics Service)
Этот сервис постоянно «слушает» Kafka. Как только прилетает новый лог:
-Сбор контекста: Python не просто смотрит на один лог. Он идет в PostgreSQL и выгружает всю историю этого студента.
-Pandas & Processing(рассчитываем метрики)
-Кластеризация

4)Слой быстрого доступа: Redis
Результат анализа Python сохраняет в Redis под ключом analytics:{id} в формате JSON.


5)Получение результата: GET Запрос
При вызове GET /api/analytics/{id}:
-Go-сервис сначала заглядывает в Redis.
-Если данные там есть (Python уже всё посчитал) — они возвращаются.
-Если данных нет (например, это первый запрос или анализ еще идет) — Go отдает статус processing и отправляет в Kafka команду.
